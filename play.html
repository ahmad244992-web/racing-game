<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Turbo Legends</title>

<style>
body {
  margin:0;
  background:#111;
  overflow:hidden;
  font-family:Arial;
}
#ui {
  position:absolute;
  top:10px; left:10px;
  background:rgba(0,0,0,0.6);
  color:#fff;
  padding:12px;
  border-radius:12px;
  z-index:10;
}
#ui div { margin-bottom:4px; }
#vip { color:gold; font-weight:bold; }

#controls {
  position:absolute;
  bottom:20px;
  width:100%;
  display:flex;
  justify-content:space-between;
  padding:0 40px;
}
.btn {
  width:70px; height:70px;
  background:rgba(255,255,255,0.2);
  border-radius:50%;
  color:#fff;
  font-size:30px;
  display:flex;
  align-items:center;
  justify-content:center;
  user-select:none;
}
</style>
</head>

<body>

<div id="ui">
  <div>ğŸ <b>Turbo Legends</b></div>
  <div>â­ Level: <span id="lvl">1</span></div>
  <div>ğŸ”¥ XP: <span id="xp">0</span>/100</div>
  <div>ğŸŸ¡ Coins: <span id="coins">0</span></div>
  <div>ğŸ”µ Gems: <span id="gems">0</span></div>
  <div id="vip">ğŸ‘‘ VIP: OFF</div>
</div>

<canvas id="game"></canvas>

<div id="controls">
  <div class="btn" id="left">â—€</div>
  <div class="btn" id="right">â–¶</div>
</div>

<script>
/* =================== Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª =================== */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

/* Ø§Ù„Ù„Ø§Ø¹Ø¨ */
let player = {
  x: canvas.width/2 - 30,
  y: canvas.height - 150,
  w: 60,
  h: 120,
  speed: 8
};

/* Ø§Ù„ØªÙ‚Ø¯Ù… */
let level = 1;
let xp = 0;
let coins = 0;
let gems = 0;
let vip = false;

/* Ø£Ø¹Ø¯Ø§Ø¡ */
let enemies = [];
let gameOver = false;

/* =================== ÙˆØ¸Ø§Ø¦Ù =================== */
function spawnEnemy() {
  enemies.push({
    x: Math.random() * (canvas.width - 60),
    y: -150,
    w: 60,
    h: 120,
    speed: 6 + level * 0.2
  });
}
setInterval(spawnEnemy, 1200);

function addXP(v) {
  xp += v;
  if (xp >= 100) {
    xp = 0;
    level++;
    coins += 100;
    if (level % 5 === 0) gems++;
  }
}

function collide(a,b){
  return a.x < b.x+b.w && a.x+a.w > b.x &&
         a.y < b.y+b.h && a.y+a.h > b.y;
}

/* =================== Ø§Ù„Ø±Ø³Ù… =================== */
function drawRoad(){
  ctx.fillStyle="#555";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.strokeStyle="#fff";
  ctx.lineWidth=5;
  ctx.setLineDash([40,40]);
  ctx.beginPath();
  ctx.moveTo(canvas.width/2,0);
  ctx.lineTo(canvas.width/2,canvas.height);
  ctx.stroke();
}

function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawRoad();

  /* Ø§Ù„Ù„Ø§Ø¹Ø¨ */
  ctx.fillStyle="#0f0";
  ctx.fillRect(player.x,player.y,player.w,player.h);

  /* Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡ */
  enemies.forEach((e,i)=>{
    e.y += e.speed;
    ctx.fillStyle="red";
    ctx.fillRect(e.x,e.y,e.w,e.h);

    if (collide(player,e)) {
      gameOver = true;
      alert("ğŸ’¥ Game Over");
      location.reload();
    }

    if (e.y > canvas.height) {
      enemies.splice(i,1);
      addXP(vip ? 20 : 10);
      coins += vip ? 20 : 10;
    }
  });

  /* ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© */
  document.getElementById("lvl").innerText = level;
  document.getElementById("xp").innerText = xp;
  document.getElementById("coins").innerText = coins;
  document.getElementById("gems").innerText = gems;
  document.getElementById("vip").innerText = vip ? "ğŸ‘‘ VIP: ON" : "ğŸ‘‘ VIP: OFF";

  requestAnimationFrame(loop);
}
loop();

/* =================== ØªØ­ÙƒÙ… =================== */
document.getElementById("left").ontouchstart = ()=>player.x -= player.speed*4;
document.getElementById("right").ontouchstart = ()=>player.x += player.speed*4;

window.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft") player.x -= player.speed*4;
  if(e.key==="ArrowRight") player.x += player.speed*4;
});
</script>
</body>
</html>
